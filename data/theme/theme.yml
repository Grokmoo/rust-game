---
include:
  - widgets
  - main_menu
  - editor
  - character_builder
children:
  item_action_menu:
    from: .list_box
    x_relative: Cursor
    y_relative: Cursor
    position: [-1, -1]
    preferred_size: [24, 0]
    height_relative: ChildSum
    width_relative: Zero
    children:
      title:
        from: .label
        text: "Actions"
        text_params:
          scale: 5.0
          horizontal_alignment: Center
        preferred_size: [0, 4]
        width_relative: Max
      actions:
        from: .list_box
        border: [0, 0, 0, 0]
        width_relative: Max
        position: [0, 4]
  mouse_over:
    from: .text_area
    border: { top: 1, bottom: 1, left: 2, right: 2 }
    background: 60_transparent_fill
    text: |
      [s=5.0|#name#]
      [?cur_hp|#cur_hp# / #max_hp#
      ][?empty;c=888|Empty
      ]
    preferred_size: [100, 12]
    width_relative: Custom
    height_relative: Custom
    x_relative: Custom
    y_relative: Custom
    position: [0, 0]
  ap_bar:
    y_relative: Max
    x_relative: Center
    position: [0, -40]
    preferred_size: [0, 8]
    width_relative: ChildSum
    border: [1, 1, 1, 1]
    layout: BoxHorizontal
    layout_spacing: { top: 0, bottom: 0, left: 1, right: 0 }
    children:
      ball:
        background: ball_animated
        preferred_size: [6, 6]
  initiative_ticker:
    preferred_size: [0, 12]
    position: [-25, 0]
    x_relative: Center
    # width_relative: ChildSum
    layout: BoxHorizontal
    layout_spacing: { right: 1, left: 0, top: 0, bottom: 0 }
    children:
      entry:
        from: .label
        background: bg_rounded
        text: "#0#"
        text_params:
          horizontal_alignment: Center
        preferred_size: [12, 0]
        height_relative: Max
      current_entry:
        from: .label
        background: bg_rounded_hover
        text: "#0#"
        text_params:
          horizontal_alignment: Center
          color: [1.0, 0.0, 0.0, 1.0]
          scale: 6.0
        preferred_size: [12, 0]
        height_relative: Max
  bottom_pane:
    background: bg_base
    border: [2, 2, 2, 2]
    preferred_size: [0, 40]
    y_relative: Max
    width_relative: Max
    children:
      portrait_pane:
        preferred_size: [100, 0]
        height_relative: Max
        layout: BoxHorizontal
        children:
          portrait_view:
            background: background_rounded
            x_relative: Max
            preferred_size: [30, 36]
            border: [1, 1, 1, 1]
            children:
              portrait:
                width_relative: Max
                height_relative: Max
                preferred_size: [0, -6]
                foreground: "#image#"
              hp_bar:
                from: .progress_bar
                width_relative: Max
                y_relative: Max
                preferred_size: [0, 6]
                text: "#cur_hp# / #max_hp#"
                text_params:
                  scale: 5.0
                  horizontal_alignment: Center
              level_up:
                from: .button
                text: "+"
                text_params:
                  scale: 6.0
                x_relative: Max
                preferred_size: [7, 7]
      abilities_bar:
        border: [1, 1, 1, 1]
        background: bg_base
        height_relative: Max
        x_relative: Max
        position: [-41, 0]
        preferred_size: [120, 0]
        layout: Grid
        layout_spacing: { top: 0, bottom: 0, left: 0, right: 1 }
        children:
          ability_button:
            from: .button
            background: background_inner
            foreground: "greyed_out"
            preferred_size: [12, 12]
            children:
              duration_label:
                from: .label
                text: "#duration#"
                text_params:
                  horizontal_alignment: Right
                  vertical_alignment: Top
                  color: { r: 1.0, g: 0.0, b: 0.0, a: 1.0 }
                width_relative: Max
                height_relative: Max
              icon:
                foreground: "#icon#"
                width_relative: Max
                height_relative: Max
      end_turn_button:
        from: .button
        background: background_rounded
        preferred_size: [24, 24]
        y_relative: Max
        x_relative: Max
        foreground: end_turn_icon
      window_button:
        from: .button
        background: background_rounded
        border: [1, 1, 1, 1]
        preferred_size: [11, 11]
        y_relative: Max
        x_relative: Max
      map_button:
        from: .bottom_pane.window_button
        position: [-26, 0]
        foreground: map_icon
      log_button:
        from: .bottom_pane.window_button
        position: [-26, -13]
        foreground: log_icon
      character_button:
        from: .bottom_pane.window_button
        position: [-26, -26]
        foreground: char_icon
      inventory_button:
        from: .bottom_pane.window_button
        position: [-13, -26]
        foreground: inv_icon
      menu_button:
        from: .bottom_pane.window_button
        position: [0, -26]
        foreground: menu_icon
  area:
    preferred_size: [-35, -40]
    width_relative: Max
    height_relative: Max
    custom:
      targeter_tile: "60_red_transparent_fill"
      feedback_text_scale: "1.2"
      creature_selected_image: "creature_selected"
      selection_box_image: "bg_selection_box"
    children:
      targeter_label:
        from: .label
        x_relative: Center
        position: [0, 15]
        text_params:
          scale: 5.0
          color: { r: 1.0, g: 0.0, b: 0.0, a: 1.0 }
        text: "Select target for #ability_id#"
  cutscene_window:
    border: [5, 5, 5, 5]
    width_relative: Max
    height_relative: Max
    background: bg_base
    children:
      close:
        from: .button
        preferred_size: [8, 4]
        text: "X"
        x_relative: Max
      next_button:
        from: .button
        text: "Continue"
        x_relative: Center
        preferred_size: [30, 10]
        y_relative: Max
      text_area:
        border: [2, 2, 2, 2]
        text_params:
          font: normal
          scale: 6.0
        background: bg_base
        text: "#0#"
        width_relative: Max
        y_relative: Max
        x_relative: Center
        position: [0, -20]
        preferred_size: [-10, 40]
  dialog_window:
    from: .window
    background: bg_medium
    x_relative: Center
    y_relative: Max
    width_relative: Zero
    height_relative: Zero
    preferred_size: [150, 50]
    children:
      title:
        text: "#name#"
      node:
        width_relative: Max
        preferred_size: [0, -8]
        position: [0, 8]
        text_params:
          font: "normal"
          scale: 4.0
        text: "#0#"
      responses:
        y_relative: Max
        layout: BoxVertical
        layout_spacing: { top: 0, bottom: 1, left: 0, right: 0 }
        width_relative: Max
        height_relative: ChildSum
        children:
          response_button:
            from: .button
            width_relative: Max
            preferred_size: [0, 6]
            children:
              text_area:
                from: .text_area
                text: "#0#"
                width_relative: Max
  merchant_window:
    from: .window
    position: [4, 4]
    preferred_size: [100, 100]
    height_relative: Zero
    children:
      title:
        text: "Merchant"
      items_list:
        preferred_size: [0, -8]
        position: [0, 8]
        width_relative: Max
        height_relative: Max
        layout: Grid
        layout_spacing: [0, 1, 0, 1]
        children:
          item_button:
            from: .item_button
  prop_window:
    from: .window
    position: [4, 4]
    preferred_size: [100, 100]
    height_relative: Zero
    children:
      title:
        text: "#name#"
      icon:
        preferred_size: [20, 20]
        background: bg_base
        position: [0, 5]
      take_all:
        from: .button
        text: "Take All"
        text_params:
          scale: 5.0
        preferred_size: [25, 10]
        position: [25, 10]
      items_list:
        preferred_size: [0, -28]
        position: [0, 28]
        width_relative: Max
        height_relative: Max
        layout: Grid
        layout_spacing: [0, 1, 0, 1]
        children:
          item_button:
            from: .item_button
  inventory_window:
    from: .window
    position: [120, 4]
    children:
      title:
        text: "Inventory"
      equipped_area:
        background: inventory_paper_doll
        preferred_size: [84, 84]
        position: [12, 8]
        children:
          cloak_button:
            from: .item_button
            position: [16, 12]
            preferred_size: [16, 16]
          head_button:
            from: .item_button
            position: [36, 3]
          torso_button:
            from: .item_button
            position: [35, 17]
            preferred_size: [14, 14]
          hands_button:
            from: .item_button
            position: [47, 32]
          legs_button:
            from: .item_button
            position: [36, 47]
          feet_button:
            from: .item_button
            position: [36, 64]
          heldmain_button:
            from: .item_button
            position: [10, 32]
            preferred_size: [16, 16]
          heldoff_button:
            from: .item_button
            position: [60, 32]
            preferred_size: [16, 16]
          waist_button:
            from: .item_button
            position: [35, 32]
          neck_button:
            from: .item_button
            position: [50, 12]
            preferred_size: [8, 8]
          fingermain_button:
            from: .item_button
            position: [28, 45]
            preferred_size: [6, 6]
          fingeroff_button:
            from: .item_button
            position: [50, 45]
            preferred_size: [6, 6]
      items_list:
        preferred_size: [0, -93]
        position: [0, 93]
        width_relative: Max
        height_relative: Max
        layout: Grid
        layout_spacing: [0, 1, 0, 1]
        children:
          item_button:
            from: .item_button
      coins_button:
        from: .item_button
        position: [74, 64]
  item_window:
    from: .bonus_text
    border: { top: 1, bottom: 1, left: 1, right: 1 }
    background: bg_base
    width_relative: Custom
    height_relative: Custom
    preferred_size: [50, 14]
    position: [0, 0]
    x_relative: Custom
    y_relative: Custom
  character_window:
    from: .window
    children:
      title:
        text: "Character Sheet"
      char_pane_button:
        from: .tab_button
        text: "Character"
        position: [5, 2]
      abilities_pane_button:
        from: .tab_button
        text: "Abilities"
        position: [26, 2]
      effects_pane_button:
        from: .tab_button
        text: "Effects"
        position: [47, 2]
      abilities:
        from: .tab_pane
        position: [0, 8]
        preferred_size: [0, -8]
        children:
          details:
            from: .ability_pane.details
            border: [2, 2, 2, 2]
            background: bg_base
            width_relative: Max
            height_relative: Zero
            preferred_size: [0, 80]
            y_relative: Max
          list:
            width_relative: Max
            height_relative: Max
            preferred_size: [0, -82]
            layout: Grid
            layout_spacing: { top :0, bottom: 1, left: 0, right: 1 }
            children:
              ability_button:
                from: .button
                preferred_size: [12, 12]
                foreground: "#icon#"
      effects:
        from: .tab_pane
        preferred_size: [0, -8]
        position: [0, 8]
        layout: BoxVertical
        layout_spacing: { top: 0, bottom: 1, left: 0, right: 0 }
        children:
          effect:
            from: .bonus_text
            background: bg_rounded
            border: [2, 2, 2, 2]
            preferred_size: [0, 20]
            width_relative: Max
      details:
        from: .tab_pane
        preferred_size: [0, -8]
        position: [0, 8]
        text_params:
          font: "normal"
          scale: 4.0
        text: |
          [?name|[s=6|#name# - #race# #sex#]
          [s=4|]
          [s=5|[x=0|Hit Points][x=30|Experience]]
          [x=0|#cur_hp# / #max_hp#][x=30|#cur_xp# / #next_xp#]
          [s=4|]
          [s=5|Level #level_0# #class_0#]
          [s=5|]
          [?0_damage_min;s=5;x=0|Main Hand][?1_damage_min;s=5;x=40|Off Hand]
          [?0_damage_min;s=4;x=0|Damage: #0_damage_min# to #0_damage_max#][?1_damage_min;s=4;x=40|Damage: #1_damage_min# to #1_damage_max#]
          [s=2|]
          [s=4;x=0|Range: #reach#]
          [s=4;x=0|Accuracy: #accuracy#]
          [s=6|]
          [s=5.0;x=0|Armor: #armor#][?armor_slashing;s=3.0| (Slashing: #armor_slashing#)][?armor_piercing;s=3.0| (Piercing: #armor_piercing#)][?armor_crushing;s=3.0| (Crushing: #armor_crushing#)][?armor_acid;s=3.0| (Acid: #armor_acid#)][?armor_cold;s=3.0| (Cold: #armor_cold#)][?armor_electrical;s=3.0| (Electrical: #armor_electrical#)][?armor_fire;s=3.0| (Fire: #armor_fire#)][?armor_sonic;s=3.0| (Sonic: #armor_sonic#)]
          [s=4|[x=0|Defense: #defense#][x=30|Fortitude: #fortitude#][x=60|Reflex: #reflex#][x=90|Will: #will#]]
          [s=6|]
          [s=5|[x=0|Strength][x=40|#str#]
                  [x=0|Dexterity][x=40|#dex#]
                  [x=0|Endurance][x=40|#end#]
                  [x=0|Perception][x=40|#per#]
                  [x=0|Intellect][x=40|#int#]
                  [x=0|Wisdom][x=40|#wis#]]
          [s=6|]
          [x=0|Initiative][x=40|#initiative#]
          [x=0|Concealment|[x=40|#concealment#]
          [s=6|]
          [x=0|Graze Threshold][x=30|Hit Threshold][x=60|Crit Threshold]
          [x=0|#graze_threshold#][x=30|#hit_threshold#][x=60|#crit_threshold#]
          [?portrait;x=75;y=-3;i=#portrait#;s=30.0|]
          [?portrait;x=75;y=-3;i=portraits/frame;s=30.0|]]
      level_up:
        from: .button
        text: "Level Up"
        text_params:
          scale: 6.0
        x_relative: Max
        preferred_size: [25, 8]
        position: [-4, 1]
  race_pane:
    preferred_size: [40, 40]
    background: bg_base
    border: [1, 1, 1, 1]
    children:
      details:
        from: .text_area
        text: |
          [s=6|#name#]
          [s=6|]
          [s=5|Unarmed Attack]
          [?min_damage|[s=4.0|#min_damage# to #max_damage# [c=f00|#damage_kind#]]
          ][?reach|[s=4.0|Reach: #reach#]
          ][?range|[s=4.0|Range: #range#]]
          [?str|Strength: #str#
          ][?dex|Dexterity: #dex#
          ][?end|Endurance: #end#
          ][?per|Perception: #per#
          ][?int|Intelligence: #int#
          ][?wis|Wisdom: #wis#
          ][?bonus_ap|AP: #bonus_ap#
          ][?min_bonus_damage|[s=4.0|Damage: #min_bonus_damage# to #max_bonus_damage# [?bonus_damage_kind;c=f00|#bonus_damage_kind#]]
          ][?bonus_reach|[s=4.0|Reach: #bonus_reach#]
          ][?bonus_range|[s=4.0|Range: #bonus_range#]
          ][?armor|[s=4.0|Armor: #armor#][?armor_slashing;s=3.0| (Slashing: #armor_slashing#)][?armor_piercing;s=3.0| (Piercing: #armor_piercing#)][?armor_crushing;s=3.0| (Crushing: #armor_crushing#)][?armor_acid;s=3.0| (Acid: #armor_acid#)][?armor_cold;s=3.0| (Cold: #armor_cold#)][?armor_electrical;s=3.0| (Electrical: #armor_electrical#)][?armor_fire;s=3.0| (Fire: #armor_fire#)][?armor_sonic;s=3.0| (Sonic: #armor_sonic#)]
          ][?initiative|[s=4.0|Initiative: #initiative#]
          ][?hit_points|[s=4.0|Hit Points: #hit_points#]
          ][?accuracy|[s=4.0|Accuracy: #accuracy#]
          ][?defense|[s=4.0|Defense: #defense#]
          ][?fortitude|[s=4.0|Fortitude: #fortitude#]
          ][?reflex|[s=4.0|Reflex: #reflex#]
          ][?will|[s=4.0|Will: #will#]
          ]
          #description#
        width_relative: Max
        height_relative: Max
  ability_pane:
    preferred_size: [40, 40]
    background: bg_base
    border: [2, 2, 2, 2]
    children:
      details:
        from: .text_area
        width_relative: Max
        height_relative: Max
        text: |
          [s=6|#name#][?prereqs_not_met;c=f00|  Prereqs not Met][?already_owned;c=0f0|  Owned]
          [s=6|]
          [?active;s=5;c=f00|Active - AP: #activate_ap#
          ][?passive;s=5;c=0ff|Passive]
          [s=4|#description#]
          [?str|Strength: #str#
          ][?dex|Dexterity: #dex#
          ][?end|Endurance: #end#
          ][?per|Perception: #per#
          ][?int|Intelligence: #int#
          ][?wis|Wisdom: #wis#
          ][?bonus_ap|AP: #bonus_ap#
          ][?min_damage|[s=4.0|Damage: #min_damage# to #max_damage# [c=f00|#damage_kind#]]
          ][?min_bonus_damage|[s=4.0|Damage: #min_bonus_damage# to #max_bonus_damage# [?bonus_damage_kind;c=f00|#bonus_damage_kind#]]
          ][?reach|[s=4.0|Reach: #reach#]
          ][?range|[s=4.0|Range: #range#]
          ][?bonus_reach|[s=4.0|Reach: #bonus_reach#]
          ][?bonus_range|[s=4.0|Range: #bonus_range#]
          ][?armor|[s=4.0|Armor: #armor#][?armor_slashing;s=3.0| (Slashing: #armor_slashing#)][?armor_piercing;s=3.0| (Piercing: #armor_piercing#)][?armor_crushing;s=3.0| (Crushing: #armor_crushing#)][?armor_acid;s=3.0| (Acid: #armor_acid#)][?armor_cold;s=3.0| (Cold: #armor_cold#)][?armor_electrical;s=3.0| (Electrical: #armor_electrical#)][?armor_fire;s=3.0| (Fire: #armor_fire#)][?armor_sonic;s=3.0| (Sonic: #armor_sonic#)]
          ][?initiative|[s=4.0|Initiative: #initiative#]
          ][?hit_points|[s=4.0|Hit Points: #hit_points#]
          ][?accuracy|[s=4.0|Accuracy: #accuracy#]
          ][?defense|[s=4.0|Defense: #defense#]
          ][?fortitude|[s=4.0|Fortitude: #fortitude#]
          ][?reflex|[s=4.0|Reflex: #reflex#]
          ][?will|[s=4.0|Will: #will#]
          [?prereqs|[s=5|]
          [s=5;c=f00|Prereqs]
          [?prereq_total_level|Level: #prereq_total_level#
          ][?prereq_race|Race: #prereq_race#
          ][?prereq_class_0|#prereq_class_0#: #prereq_level_0#
          ][?prereq_class_0|#prereq_class_1#: #prereq_level_1#
          ][?prereq_class_0|#prereq_class_2#: #prereq_level_2#
          ][?prereq_str|Strength: #prereq_str#
          ][?prereq_dex|Dexterity: #prereq_dex#
          ][?prereq_end|Endurance: #prereq_end#
          ][?prereq_per|Perception: #prereq_per#
          ][?prereq_int|Intelligence: #prereq_int#
          ][?prereq_wis|Wisdom: #prereq_wis#
          ][?prereq_ability_0|Ability: #prereq_ability_0#
          ][?prereq_ability_1|Ability: #prereq_ability_1#
          ][?prereq_ability_2|Ability: #prereq_ability_2#
          ][?prereq_ability_3|Ability: #prereq_ability_3#
          ][?prereq_ability_4|Ability: #prereq_ability_4#
          ]
  class_pane:
    preferred_size: [40, 40]
    background: bg_base
    border: [2, 2, 2, 2]
    children:
      details:
        from: .text_area
        text: |
          [s=6|#name#]
          [s=6|]
          [s=5|Bonuses per Level]
          [?str|Strength: #str#
          ][?dex|Dexterity: #dex#
          ][?end|Endurance: #end#
          ][?per|Perception: #per#
          ][?int|Intelligence: #int#
          ][?wis|Wisdom: #wis#
          ][?bonus_ap|AP: #bonus_ap#
          ][?min_bonus_damage|[s=4.0|Damage: #min_bonus_damage# to #max_bonus_damage# [?bonus_damage_kind;c=f00|#bonus_damage_kind#]]
          ][?bonus_reach|[s=4.0|Reach: #bonus_reach#]
          ][?bonus_range|[s=4.0|Range: #bonus_range#]
          ][?armor|[s=4.0|Armor: #armor#][?armor_slashing;s=3.0| (Slashing: #armor_slashing#)][?armor_piercing;s=3.0| (Piercing: #armor_piercing#)][?armor_crushing;s=3.0| (Crushing: #armor_crushing#)][?armor_acid;s=3.0| (Acid: #armor_acid#)][?armor_cold;s=3.0| (Cold: #armor_cold#)][?armor_electrical;s=3.0| (Electrical: #armor_electrical#)][?armor_fire;s=3.0| (Fire: #armor_fire#)][?armor_sonic;s=3.0| (Sonic: #armor_sonic#)]
          ][?initiative|[s=4.0|Initiative: #initiative#]
          ][?hit_points|[s=4.0|Hit Points: #hit_points#]
          ][?accuracy|[s=4.0|Accuracy: #accuracy#]
          ][?defense|[s=4.0|Defense: #defense#]
          ][?fortitude|[s=4.0|Fortitude: #fortitude#]
          ][?reflex|[s=4.0|Reflex: #reflex#]
          ][?will|[s=4.0|Will: #will#]
          ]
          #description#
        width_relative: Max
        height_relative: Max
  exit_confirmation:
    from: .confirmation_window
    children:
      title:
        text: "Exit Sulis?"
  menu_confirmation:
    from: .confirmation_window
    children:
      title:
        text: "Return to Main Menu?"
      accept:
        text: "Accept"
  in_game_menu:
    background: bg_base
    border: [5, 5, 5, 5]
    preferred_size: [40, 10]
    x_relative: Center
    y_relative: Center
    position: [0, 0]
    layout: BoxVertical
    layout_spacing: { top: 0, bottom: 5, left: 0, right: 0 }
    height_relative: ChildSum
    children:
      back:
        from: .button
        preferred_size: [20, 10]
        text: "Back to Game"
        text_params:
          scale: 5.5
      menu:
        from: .button
        preferred_size: [20, 10]
        text: "Main Menu"
        text_params:
          scale: 5.5
      exit:
        from: .button
        preferred_size: [20, 10]
        text: "Exit"
        text_params:
          scale: 5.5
  bonus_text:
    from: .text_area
    text: |
      [s=5.0;c=f00|#name#] [?total_duration;x=60|#remaining_duration# of #total_duration# Rounds Remaining
      ][?str|Strength: #str#
      ][?dex|Dexterity: #dex#
      ][?end|Endurance: #end#
      ][?per|Perception: #per#
      ][?int|Intelligence: #int#
      ][?wis|Wisdom: #wis#
      ][?bonus_ap|AP: #bonus_ap#
      ][?min_damage|[s=4.0|Damage: #min_damage# to #max_damage# [c=f00|#damage_kind#]]
      ][?min_bonus_damage|[s=4.0|Damage: #min_bonus_damage# to #max_bonus_damage# [?bonus_damage_kind;c=f00|#bonus_damage_kind#]]
      ][?reach|[s=4.0|Reach: #reach#]
      ][?range|[s=4.0|Range: #range#]
      ][?bonus_reach|[s=4.0|Reach: #bonus_reach#]
      ][?bonus_range|[s=4.0|Range: #bonus_range#]
      ][?armor|[s=4.0|Armor: #armor#][?armor_slashing;s=3.0| (Slashing: #armor_slashing#)][?armor_piercing;s=3.0| (Piercing: #armor_piercing#)][?armor_crushing;s=3.0| (Crushing: #armor_crushing#)][?armor_acid;s=3.0| (Acid: #armor_acid#)][?armor_cold;s=3.0| (Cold: #armor_cold#)][?armor_electrical;s=3.0| (Electrical: #armor_electrical#)][?armor_fire;s=3.0| (Fire: #armor_fire#)][?armor_sonic;s=3.0| (Sonic: #armor_sonic#)]
      ][?initiative|[s=4.0|Initiative: #initiative#]
      ][?hit_points|[s=4.0|Hit Points: #hit_points#]
      ][?accuracy|[s=4.0|Accuracy: #accuracy#]
      ][?defense|[s=4.0|Defense: #defense#]
      ][?fortitude|[s=4.0|Fortitude: #fortitude#]
      ][?reflex|[s=4.0|Reflex: #reflex#]
      ][?will|[s=4.0|Will: #will#]
      ][?concealment|[s=4.0|Concealment: #concealment#]
      ][?crit_threshold|[s=4.0|Crit Threshold: #crit_threshold#]
      ][?hit_threshold|[s=4.0|Hit Threshold: #hit_threshold#]
      ][?graze_threshold|[s=4.0|Graze Threshold: #graze_threshold#]
      ][?price;s=3.5|
      Price: [c=f00|#price#] Gold
      ][!price;?value;s=3.5|
      Value: [c=f00|#value#] Gold
      ][?weight;s=3.5|Weight: [c=f00|#weight#] lbs]
...
